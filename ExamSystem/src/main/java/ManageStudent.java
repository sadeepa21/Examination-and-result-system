
import java.sql.Connection;
import javax.swing.JOptionPane;
import java.sql.PreparedStatement;
import javax.swing.JFrame;
import javax.swing.JButton;



/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */

/**
 *
 * @author ASUS
 */
public class ManageStudent extends JFrame {

    /**
     * Creates new form ManageStudent
     */
    public ManageStudent() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        SIDlbl = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        FNlbl = new javax.swing.JLabel();
        DOBlbl = new javax.swing.JLabel();
        Genlbl = new javax.swing.JLabel();
        SIDtxt = new javax.swing.JTextField();
        DOBtxt = new javax.swing.JTextField();
        Gentxt = new javax.swing.JTextField();
        FNtxt = new javax.swing.JTextField();
        Addbtn = new javax.swing.JButton();
        Updatebtn = new javax.swing.JButton();
        Closebtn = new javax.swing.JButton();
        Addlbl = new javax.swing.JLabel();
        Addtxt = new javax.swing.JTextField();
        ConNumlbl = new javax.swing.JLabel();
        ConNumtxt = new javax.swing.JTextField();
        Deletebtn = new javax.swing.JButton();
        Clearbtn = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        SIDlbl.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel1.setText(" Student Management ");
        SIDlbl.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 30, -1, -1));

        jLabel2.setText("Student ID");
        SIDlbl.add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 70, -1, -1));

        FNlbl.setText("Full name");
        SIDlbl.add(FNlbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 110, -1, -1));

        DOBlbl.setText("Date of birth");
        SIDlbl.add(DOBlbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 150, -1, -1));

        Genlbl.setText("Gender");
        SIDlbl.add(Genlbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 190, -1, -1));
        SIDlbl.add(SIDtxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 70, 130, -1));
        SIDlbl.add(DOBtxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 150, 130, -1));
        SIDlbl.add(Gentxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 190, 130, -1));

        FNtxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                FNtxtActionPerformed(evt);
            }
        });
        SIDlbl.add(FNtxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 110, 130, -1));

        Addbtn.setText("Add");
        Addbtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AddbtnActionPerformed(evt);
            }
        });
        SIDlbl.add(Addbtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 330, -1, -1));

        Updatebtn.setText("Update");
        Updatebtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                UpdatebtnActionPerformed(evt);
            }
        });
        SIDlbl.add(Updatebtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 330, -1, -1));

        Closebtn.setText("Close");
        Closebtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ClosebtnActionPerformed(evt);
            }
        });
        SIDlbl.add(Closebtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(470, 330, -1, -1));

        Addlbl.setText("Address");
        SIDlbl.add(Addlbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 230, -1, -1));

        Addtxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                AddtxtActionPerformed(evt);
            }
        });
        SIDlbl.add(Addtxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 230, 130, -1));

        ConNumlbl.setText("Contact Number");
        SIDlbl.add(ConNumlbl, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 270, -1, -1));
        SIDlbl.add(ConNumtxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 270, 130, -1));

        Deletebtn.setText("Delete");
        Deletebtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                DeletebtnActionPerformed(evt);
            }
        });
        SIDlbl.add(Deletebtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(280, 330, -1, -1));

        Clearbtn.setText("Clear");
        Clearbtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ClearbtnActionPerformed(evt);
            }
        });
        SIDlbl.add(Clearbtn, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 330, -1, -1));

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(SIDlbl, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(SIDlbl, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void AddbtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AddbtnActionPerformed
        try (Connection conn = DBconnection.getConnection()) {
    String sql = "INSERT INTO students (full_name, dob, gender, address, contact_number) VALUES (?, ?, ?, ?, ?)";
    try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
        pstmt.setString(1, FNtxt.getText());
        pstmt.setString(2, DOBtxt.getText());
        pstmt.setString(3, Gentxt.getText());
        pstmt.setString(4, Addtxt.getText());
        pstmt.setString(5, ConNumtxt.getText());

        pstmt.executeUpdate();
        JOptionPane.showMessageDialog(this, "Student added successfully!");
    }
} catch (Exception e) {
    JOptionPane.showMessageDialog(this, "Error: " + e.getMessage());
}


}

    }//GEN-LAST:event_AddbtnActionPerformed

    private void UpdatebtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_UpdatebtnActionPerformed
        // TODO add your handling code here:
                                                     
        try (Connection conn = DBconnection.getConnection()) {
            String sql = "UPDATE students SET full_name=?, dob=?, gender=?, address=?, contact_number=? WHERE student_id=?";
            try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
                pstmt.setString(1, FNtxt.getText());
                pstmt.setString(2, DOBtxt.getText());
                pstmt.setString(3, Gentxt.getText());
                pstmt.setString(4, Addtxt.getText());
                pstmt.setString(5, ConNumtxt.getText());
                pstmt.setInt(6, Integer.parseInt(SIDtxt.getText()));

                int rows = pstmt.executeUpdate();
                if (rows > 0) {
                    JOptionPane.showMessageDialog(null, "Updated successfully");
                } else {
                    JOptionPane.showMessageDialog(null, "Student ID not found");
                }
            }
        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, "Error: " + e.getMessage());
        
    }

       
        

    }//GEN-LAST:event_UpdatebtnActionPerformed

    private void FNtxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_FNtxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_FNtxtActionPerformed

    private void AddtxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AddtxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_AddtxtActionPerformed

    private void ClosebtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ClosebtnActionPerformed
        // TODO add your handling code here:
             this.dispose();    
    }//GEN-LAST:event_ClosebtnActionPerformed

    private void DeletebtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_DeletebtnActionPerformed
        // TODO add your handling code here:
                                                 
        String id = SIDtxt.getText();
        int confirm = JOptionPane.showConfirmDialog(null, "Delete student ID " + id + "?", "Confirm", JOptionPane.YES_NO_OPTION);

        if (confirm == JOptionPane.YES_OPTION) {
            try (Connection conn = DBconnection.getConnection()) {
                String sql = "DELETE FROM students WHERE student_id = ?";
                try (PreparedStatement pstmt = conn.prepareStatement(sql)) {
                    pstmt.setInt(1, Integer.parseInt(id));
                    int rowsAffected = pstmt.executeUpdate();

                    if (rowsAffected > 0) {
                        JOptionPane.showMessageDialog(null, "Deleted student ID " + id);
                         // Clear form after delete
                    } else {
                        JOptionPane.showMessageDialog(null, "Student ID not found.");
                    }
                }
            } catch (Exception e) {
                JOptionPane.showMessageDialog(null, "Error: " + e.getMessage());
        }
    
}

       
    }//GEN-LAST:event_DeletebtnActionPerformed

    private void ClearbtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ClearbtnActionPerformed
        // TODO add your handling code here:
        SIDtxt.setText("");
        FNtxt.setText("");
        DOBtxt.setText("");
        Gentxt.setText("");
        Addtxt.setText("");
        ConNumtxt.setText("");
    }//GEN-LAST:event_ClearbtnActionPerformed
      

       
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
       } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(ManageStudent.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(ManageStudent.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(ManageStudent.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(ManageStudent.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
     java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            ManageStudent frame = new ManageStudent();
            frame.setVisible(true);
        }
    });
}
        

       

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton Addbtn;
    private javax.swing.JLabel Addlbl;
    private javax.swing.JTextField Addtxt;
    private javax.swing.JButton Clearbtn;
    private javax.swing.JButton Closebtn;
    private javax.swing.JLabel ConNumlbl;
    private javax.swing.JTextField ConNumtxt;
    private javax.swing.JLabel DOBlbl;
    private javax.swing.JTextField DOBtxt;
    private javax.swing.JButton Deletebtn;
    private javax.swing.JLabel FNlbl;
    private javax.swing.JTextField FNtxt;
    private javax.swing.JLabel Genlbl;
    private javax.swing.JTextField Gentxt;
    private javax.swing.JPanel SIDlbl;
    private javax.swing.JTextField SIDtxt;
    private javax.swing.JButton Updatebtn;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    // End of variables declaration//GEN-END:variables


   
